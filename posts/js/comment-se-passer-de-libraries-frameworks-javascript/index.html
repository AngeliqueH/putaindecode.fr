
<!DOCTYPE html>
<!--
  HEY YOU, STOP LOOKING AT MY SOURCE CODE
  Just check it out directly on Github :

  https://github.com/putaindecode/website.git
-->
<html lang="fr" class="no-js no-touch ">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<script>(function(docEl) {
  docEl.className = docEl.className.replace(/\bno-js\b/, 'js');
  if ('ontouchstart' in docEl) { docEl.className = docEl.className.replace(/\bno-touch\b/, 'touch'); }
})(document.documentElement);</script>

<meta charset="utf-8">
<title>Comment se passer de libraries/frameworks JavaScript</title>
<meta name="description" content="">
<base href="http://putaindecode.fr/" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="feed.xml" rel="alternate" type="application/rss+xml">

<link rel="stylesheet" href="/assets/css/putaindecode.css?20140115174055">




</head>
<body>

<div class="">
  <nav class="putainde-Nav">
	<div class="grid">
		<div class="grid__cell">
			<a class="putainde-SiteTitle" href="/">
				<img class="putainde-Logo" alt="Putain de Code !" src="/assets/img/p!-logo.svg" />
				Putain de Code !
			</a>

			<span class="putainde-Baseline">On voulait mettre une baseline mais on a pas été foutu d&#x27;en trouver une</span>

			<ul class="putainde-Nav-list">
				<li class=""><a class="putainde-Nav-list-item " href="c-est-quoi-putaindecode">Putain de ... ?</a>
        <li class=""><a class="putainde-Nav-list-item " href="posts">Les Posts</a>
				<li class=""><a class="putainde-Nav-list-item " href="posts/comment-contribuer/">Comment Contribuer ?</a>
				<li class=""><a class="putainde-Nav-list-item " href="le-crew">Le Crew</a>
			</ul>
		</div>
	</div>
</nav>
 
  <article class="putainde-Content grid putainde-Post">
    <header class="putainde-Content-header grid__cell unit-1-1">
      <h1 class="putainde-Content-title">Comment se passer de libraries/frameworks JavaScript</h1>
      <div class="putainde-Content-metas">
        <span class="putainde-Content-author">Par <span class="putainde-Author">bloodyowl</span></span>
        
        <span class="putainde-Content-tags">Tags: javascript,frameworks,libraries</span>
      </div>
    </header>
    <div class="putainde-Content-body grid__cell unit-3-4--m">
    


<p><strong> Petite note préalable </strong> : Évidemment que ça ne marche pas sous les vieux navigateurs, cet article s&#39;adresse principalement à toi pour te faire comprendre comment les choses marchent.</p>
<p>De plus en plus, le besoin de légèreté se fait sentir sur les pages. En dépit d&#39;un web plus rapide sur desktop, on a maintenant beaucoup de devices connectés via 3G ou Edge (un petit coucou au métro parisien). Du coup, tu te rendras vite compte qu&#39;embarquer jQuery + jQuery Mobile + jQuery UI et un tas d&#39;autres plug-ins grapillés sur le web, ça commence à peser.</p>
<h2 id="pour-la-s-lection-d-lements">Pour la sélection d&#39;élements</h2>
<p>Pour remplacer ton bon vieux <code>$</code> magique, <code>document.querySelectorAll</code> semble faire l&#39;affaire. En revanche, il retourne une instance de <code>NodeList</code>, pas d&#39;<code>Array</code>, ce qui ne nous arrange pas des masses.</p>
<p>Du coup, on peut écrire une petite function toute con, qui nous retourne un <code>Array</code> et ses méthodes bien utiles.</p>
<pre><code class="language-javascript"><span class="cm-keyword">var</span> <span class="cm-variable">nativeSlice</span> = [].<span class="cm-variable">slice</span> <span class="cm-comment">// la méthode de conversion</span>

<span class="cm-keyword">function</span> <span class="cm-variable">$</span>(<span class="cm-variable">selector</span>){
  <span class="cm-keyword">var</span> <span class="cm-variable">list</span> = <span class="cm-variable">document</span>.<span class="cm-variable">querySelectorAll</span>(<span class="cm-variable">selector</span>)
  <span class="cm-keyword">return</span> <span class="cm-variable">nativeSlice</span>.<span class="cm-variable">call</span>(<span class="cm-variable">list</span>)
}</code></pre>
<p>Alternativement, tu peux utiliser <code>Array.apply(null, list)</code> plutôt que <code>nativeSlice.call(list)</code>, si vraiment ça te fait plaisir.</p>
<p>Une troisième solution, un peu plus chiante au quotidien (et terriblement laide), c&#39;est d&#39;utiliser directement les méthodes qui t&#39;intéressent (ex. <code>[].forEach</code>) de cette façon :</p>
<pre><code class="language-javascript">;[].<span class="cm-variable">forEach</span>.<span class="cm-variable">call</span>(<span class="cm-variable">document</span>.<span class="cm-variable">querySelectorAll</span>(<span class="cm-variable">selector</span>), <span class="cm-keyword">function</span>(<span class="cm-variable">element</span>){
  <span class="cm-comment">// do something w/ element</span>
})</code></pre>
<p>Pour en revenir à notre petite méthode <code>$</code>, on peut du coup faire :</p>
<pre><code class="language-javascript"><span class="cm-comment">// prends bien l&#39;habitude de garder</span>
<span class="cm-comment">// tes nodeLists si tu les réutilises</span>

<span class="cm-keyword">var</span> <span class="cm-variable">elements</span> = <span class="cm-variable">$</span>(<span class="cm-string">&quot;.my-elements-className&quot;</span>)

<span class="cm-variable">elements</span>.<span class="cm-property">forEach</span>(<span class="cm-keyword">function</span>(<span class="cm-def">element</span>){
  <span class="cm-comment">// do something w/ element</span>
})</code></pre>
<h3 id="pour-l-event-delegation">Pour l&#39;event delegation</h3>
<p>L&#39;event delegation, c&#39;est bien, mangez-en. Ça permet entre autres de ne pas attacher 150 listeners uniques à 150 elements différents, mais à attacher un seul listener sur un parent commun, et analyser les sources des évenements à l&#39;intérieur en se basant sur le bubbling (remontée d&#39;évenement de la source au plus haut parent) ou capturing (descente d&#39;évenement du plus haut parent à la source, avant même que la source ne le reçoive).</p>
<p>Pour faire de la délégation, on va procéder en trois temps :</p>
<ul>
<li>Choper <code>event.target</code></li>
<li>Vérifier que le sélecteur qui nous intéresse correspond bien à <code>event.target</code> ou un de ses parents (dans le cas où l&#39;on clique sur le <code>.icon-Arrow</code> dans <code>.js-Button-action</code>)</li>
<li>Si ça match, on garde l&#39;élement correspondant au sélecteur, sinon, exit</li>
</ul>
<p>Les browsers relativement récents possèdent une méthode : <code>matchesSelector</code> (et tous ses alias préfixés). Ce qu&#39;on peut donc faire, c&#39;est ceci :</p>
<pre><code class="language-javascript"><span class="cm-keyword">var</span> <span class="cm-variable">docEl</span> = <span class="cm-variable">document</span>.<span class="cm-property">documentElement</span>
    <span class="cm-comment">// si c&#39;est dans docEl, c&#39;est que c&#39;est dispo</span>
  , <span class="cm-variable">nativeMatchesSelector</span> =
      <span class="cm-variable">docEl</span>.<span class="cm-property">matchesSelector</span> ||
      <span class="cm-variable">docEl</span>.<span class="cm-property">webkitMatchesSelector</span> ||
      <span class="cm-variable">docEl</span>.<span class="cm-property">mozMatchesSelector</span> ||
      <span class="cm-variable">docEl</span>.<span class="cm-property">oMatchesSelector</span> ||
      <span class="cm-variable">docEl</span>.<span class="cm-property">msMatchesSelector</span>
  , <span class="cm-variable">matchesSelector</span> = <span class="cm-variable">nativeMatchesSelector</span> || <span class="cm-variable">matchesPolyfill</span>

<span class="cm-comment">// le polyfill utilise querySelectorAll</span>
<span class="cm-comment">// et cherche dans le parent de l&#39;élement</span>
<span class="cm-keyword">function</span> <span class="cm-variable">matchesPolyfill</span>(<span class="cm-def">selector</span>){
  <span class="cm-keyword">var</span> <span class="cm-def">node</span> = <span class="cm-keyword">this</span>
    , <span class="cm-def">parent</span> = <span class="cm-variable-2">node</span>.<span class="cm-property">parentNode</span>
    , <span class="cm-def">query</span>, <span class="cm-def">index</span>, <span class="cm-def">length</span>
  <span class="cm-keyword">if</span>(!<span class="cm-variable-2">parent</span> || <span class="cm-variable-2">parent</span>.<span class="cm-property">nodeType</span> != <span class="cm-number">1</span>) {
    <span class="cm-keyword">return</span> <span class="cm-atom">false</span>
  }
  <span class="cm-variable-2">query</span> = <span class="cm-variable-2">parent</span>.<span class="cm-property">querySelectorAll</span>(<span class="cm-variable-2">selector</span>)
  <span class="cm-variable-2">index</span> = -<span class="cm-number">1</span>
  <span class="cm-variable-2">length</span> = <span class="cm-variable-2">query</span>.<span class="cm-property">length</span>
  <span class="cm-keyword">while</span>(++<span class="cm-variable-2">index</span> &lt; <span class="cm-variable-2">length</span>) {
    <span class="cm-keyword">if</span>(<span class="cm-variable-2">query</span>[<span class="cm-variable-2">index</span>] == <span class="cm-variable-2">node</span>) <span class="cm-keyword">return</span> <span class="cm-atom">true</span>
  }
  <span class="cm-keyword">return</span> <span class="cm-atom">false</span>
}

<span class="cm-keyword">function</span> <span class="cm-variable">getCurrentTarget</span>(<span class="cm-def">node</span>, <span class="cm-def">selector</span>){
  <span class="cm-keyword">if</span>(<span class="cm-variable">matchesSelector</span>.<span class="cm-property">call</span>(<span class="cm-variable-2">node</span>, <span class="cm-variable-2">selector</span>)) <span class="cm-keyword">return</span> <span class="cm-variable-2">node</span>
  <span class="cm-keyword">while</span>(<span class="cm-variable-2">node</span> = <span class="cm-variable-2">node</span>.<span class="cm-property">parentNode</span>) {
    <span class="cm-keyword">if</span>(<span class="cm-variable-2">node</span>.<span class="cm-property">nodeType</span> != <span class="cm-number">1</span>) <span class="cm-keyword">return</span> <span class="cm-atom">false</span>
    <span class="cm-keyword">if</span>(<span class="cm-variable">matchesSelector</span>.<span class="cm-property">call</span>(<span class="cm-variable-2">node</span>, <span class="cm-variable-2">selector</span>)) <span class="cm-keyword">return</span> <span class="cm-variable-2">node</span>
  }
  <span class="cm-keyword">return</span> <span class="cm-atom">false</span>
}</code></pre>
<p>Dès lors, dans nos listeners, on pourra directement procéder ainsi :</p>
<pre><code class="language-javascript"><span class="cm-variable">element</span>.<span class="cm-property">addEventListener</span>(<span class="cm-string">&quot;click&quot;</span>, <span class="cm-keyword">function</span>(<span class="cm-def">evt</span>){
  <span class="cm-keyword">var</span> <span class="cm-def">currentTarget</span> = <span class="cm-variable">getCurrentTarget</span>(<span class="cm-variable-2">evt</span>.<span class="cm-property">target</span>, <span class="cm-string">&quot;.Button-action&quot;</span>)
  <span class="cm-keyword">if</span>(!<span class="cm-variable-2">currentTarget</span>) <span class="cm-keyword">return</span>
  <span class="cm-comment">// all good with currentTarget</span>
})</code></pre>
<h3 id="pour-l-ajax">Pour l&#39;Ajax</h3>
<p>Pourquoi est-ce que l&#39;on appelle ça encore Ajax, d&#39;ailleurs ? Bref.</p>
<p>Simple comme bonjour :</p>
<pre><code class="language-javascript"><span class="cm-keyword">function</span> <span class="cm-variable">isSuccessStatus</span>(<span class="cm-def">status</span>){
  <span class="cm-keyword">return</span> <span class="cm-variable-2">status</span> &gt;= <span class="cm-number">200</span> &amp;&amp; <span class="cm-variable-2">status</span> &lt; <span class="cm-number">300</span> || <span class="cm-variable-2">status</span> == <span class="cm-number">304</span>
}

<span class="cm-keyword">function</span> <span class="cm-variable">ajax</span>(<span class="cm-def">options</span>){
  <span class="cm-keyword">var</span> <span class="cm-def">xhr</span> = <span class="cm-keyword">new</span> <span class="cm-variable">XMLHttpRequest</span>()
    , <span class="cm-def">done</span> = <span class="cm-atom">false</span>
    , <span class="cm-def">async</span> = <span class="cm-variable-2">options</span>.<span class="cm-property">hasOwnProperty</span>(<span class="cm-string">&quot;async&quot;</span>) ? <span class="cm-variable-2">options</span>.<span class="cm-property">async</span> : <span class="cm-atom">true</span>

  <span class="cm-variable-2">xhr</span>.<span class="cm-property">open</span>(<span class="cm-variable-2">options</span>.<span class="cm-property">method</span> || <span class="cm-string">&quot;GET&quot;</span>, <span class="cm-variable-2">options</span>.<span class="cm-property">url</span>, <span class="cm-variable-2">async</span>)

  <span class="cm-variable-2">xhr</span>.<span class="cm-property">onreadystatechange</span> = <span class="cm-keyword">function</span>(){
    <span class="cm-keyword">if</span>(<span class="cm-variable-2">done</span>) <span class="cm-keyword">return</span>
    <span class="cm-keyword">if</span>(<span class="cm-keyword">this</span>.<span class="cm-property">readyState</span> != <span class="cm-number">4</span>) <span class="cm-keyword">return</span>
    <span class="cm-variable-2">done</span> = <span class="cm-atom">true</span>

    <span class="cm-keyword">if</span>(<span class="cm-variable">isSuccessStatus</span>(<span class="cm-keyword">this</span>.<span class="cm-property">status</span>)) {
      <span class="cm-keyword">if</span>(<span class="cm-variable-2">options</span>.<span class="cm-property">success</span>) {
        <span class="cm-variable-2">options</span>.<span class="cm-property">success</span>.<span class="cm-property">call</span>(<span class="cm-keyword">this</span>)
      }
      <span class="cm-keyword">return</span>
    }

    <span class="cm-keyword">if</span>(<span class="cm-variable-2">options</span>.<span class="cm-property">error</span>) {
      <span class="cm-variable-2">options</span>.<span class="cm-property">error</span>.<span class="cm-property">call</span>(<span class="cm-keyword">this</span>)
    }
  }
  <span class="cm-variable">Object</span>.<span class="cm-property">keys</span>(<span class="cm-variable-2">options</span>.<span class="cm-property">headers</span> || {})
    .<span class="cm-property">forEach</span>(<span class="cm-keyword">function</span>(<span class="cm-def">key</span>){
      <span class="cm-variable-2">xhr</span>.<span class="cm-property">setRequestHeader</span>(<span class="cm-variable-2">key</span>, <span class="cm-variable-2">options</span>.<span class="cm-property">headers</span>[<span class="cm-variable-2">key</span>])
    })
  <span class="cm-variable-2">xhr</span>.<span class="cm-property">send</span>(<span class="cm-variable-2">options</span>.<span class="cm-property">data</span> || <span class="cm-atom">null</span>)
  <span class="cm-keyword">return</span> <span class="cm-variable-2">xhr</span>
}</code></pre>
<p>Cette fonction offre un support basique de XHR :</p>
<pre><code class="language-javascript"><span class="cm-keyword">var</span> <span class="cm-variable">myXHR</span> = <span class="cm-variable">ajax</span>({
    <span class="cm-property">url</span> : <span class="cm-string">&quot;api/users&quot;</span>
  , <span class="cm-property">success</span> : <span class="cm-keyword">function</span>(){
      <span class="cm-variable">doStuff</span>(<span class="cm-keyword">this</span>.<span class="cm-property">responseText</span>)
    }
  , <span class="cm-property">error</span> : <span class="cm-keyword">function</span>(){
      <span class="cm-variable">showError</span>(<span class="cm-keyword">this</span>.<span class="cm-property">status</span>)
    }
})</code></pre>
<h3 id="es5-magic">ES5 magic</h3>
<p>EcmaScript 5 délivre des petites méthodes très intéressantes pour se simplifier la vie, fortement inspirées par ce qu&#39;on a l&#39;habitude de trouver dans les bibliothèques ayant connu l&#39;âge d&#39;or, comme <a href="http://prototypejs.org">PrototypeJS</a> ou <a href="http://mootools.net">MooTools</a>.</p>
<p>Dès lors, plutôt qu&#39;un ennuyeux :</p>
<pre><code class="language-javascript"><span class="cm-keyword">var</span> <span class="cm-variable">key</span>, <span class="cm-variable">item</span>
<span class="cm-keyword">for</span>(<span class="cm-variable">key</span> <span class="cm-keyword">in</span> <span class="cm-variable">myObject</span>) {
  <span class="cm-keyword">if</span>(<span class="cm-variable">myObject</span>.<span class="cm-property">hasOwnProperty</span>(<span class="cm-variable">key</span>)) {
    <span class="cm-variable">item</span> = <span class="cm-variable">myObject</span>[<span class="cm-variable">key</span>]
    <span class="cm-comment">// do something</span>
  }
}</code></pre>
<p>on peut se contenter d&#39;un :</p>
<pre><code class="language-javascript"><span class="cm-variable">Object</span>.<span class="cm-property">keys</span>(<span class="cm-variable">myObject</span>)
  .<span class="cm-property">forEach</span>(<span class="cm-keyword">function</span>(<span class="cm-def">key</span>){
    <span class="cm-keyword">var</span> <span class="cm-def">item</span> = <span class="cm-variable">myObject</span>[<span class="cm-variable">i</span>]
    <span class="cm-comment">// do something</span>
  })</code></pre>
<p>De même, on bénéficie de méthodes s&#39;avérant très utiles, comme <a href="http://developer.mozilla.org/en-US/docs/[Web/JavaScript/Reference/Global_Objects/Array/prototype"><code>Array.prototype.map</code>, <code>Array.prototype.reduce</code>, <code>Array.prototype.filter</code></a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object"><code>Object.create</code>, <code>Object.getPrototypeOf</code>, <code>Object.getOwnPropertyNames</code>, <code>Object.defineProperty</code></a> dont je t&#39;invite, si cela t&#39;intéresse, à te renseigner sur ces méthodes. Et si tu veux avoir plus de détails, read the fucking manual : <a href="http://es5.github.io"><a href="http://es5.github.io">http://es5.github.io</a></a>.</p>
<h3 id="des-petits-d-tails-cools-du-c-t-des-events">Des petits détails cools du côté des events</h3>
<p>Avec <code>addEventListener</code>, on peut aussi passer un objet comme listener, avec <code>handleEvent</code> pour interface :</p>
<pre><code class="language-javascript"><span class="cm-keyword">var</span> <span class="cm-variable">myElementClickEvents</span> = {
    <span class="cm-property">element</span> : <span class="cm-variable">myElement</span>
  , <span class="cm-property">callbacks</span> : []
  , <span class="cm-variable">handleEvent</span> : <span class="cm-keyword">function</span>(<span class="cm-variable">evt</span>){
      <span class="cm-keyword">var</span> <span class="cm-variable">self</span> = <span class="cm-keyword">this</span>
      <span class="cm-keyword">this</span>.<span class="cm-variable">callbacks</span>.<span class="cm-variable">forEach</span>(<span class="cm-keyword">function</span>(<span class="cm-variable">item</span>){
        <span class="cm-variable">item</span>.<span class="cm-variable">call</span>(<span class="cm-variable">self</span>.<span class="cm-variable">element</span>, <span class="cm-variable">evt</span>)
      })
    }
}
<span class="cm-variable">myElement</span>.<span class="cm-variable">addEventListener</span>(<span class="cm-string">&quot;click&quot;</span>, <span class="cm-variable">myElementClickEvents</span>)

<span class="cm-variable">myElementClickEvents</span>.<span class="cm-variable">callbacks</span>.<span class="cm-variable">push</span>(<span class="cm-keyword">function</span>(<span class="cm-variable">evt</span>){
  <span class="cm-variable">console</span>.<span class="cm-variable">log</span>(<span class="cm-variable">evt</span>)
})</code></pre>
<p>Avec ça, on peut facilement garder une trace de ce qu&#39;on passé comme listeners.</p>
<h3 id="du-type-checking-">Du type checking ?</h3>
<pre><code class="language-javascript"><span class="cm-keyword">var</span> <span class="cm-variable">getClass</span> = <span class="cm-keyword">function</span>(<span class="cm-def">o</span>){ <span class="cm-keyword">return</span> <span class="cm-variable">Object</span>.<span class="cm-property">prototype</span>.<span class="cm-property">toString</span>.<span class="cm-property">call</span>(<span class="cm-variable-2">o</span>) }
  , <span class="cm-variable">someString</span> = <span class="cm-keyword">new</span> <span class="cm-variable">String</span>(<span class="cm-string">&quot;foo&quot;</span>)

<span class="cm-keyword">typeof</span> <span class="cm-variable">someString</span> <span class="cm-comment">// &quot;object&quot;</span>
<span class="cm-variable">getClass</span>(<span class="cm-variable">someString</span>) <span class="cm-comment">// &quot;[object String]&quot;, sounds more reasonable</span></code></pre>
<h3 id="petit-bonus">Petit bonus</h3>
<p>Un petit bonus rien que pour toi : pour avoir une syntaxe plus sympathique et plus claire que les prototypes.</p>
<p>En principe, on fait comme ça :</p>
<pre><code class="language-javascript"><span class="cm-keyword">function</span> <span class="cm-variable">Animal</span>(<span class="cm-def">name</span>){
  <span class="cm-keyword">this</span>.<span class="cm-property">name</span> = <span class="cm-variable-2">name</span>
}

<span class="cm-variable">Animal</span>.<span class="cm-property">prototype</span>.<span class="cm-property">getName</span> = <span class="cm-keyword">function</span>(){
  <span class="cm-keyword">return</span> <span class="cm-keyword">this</span>.<span class="cm-property">name</span>
}

<span class="cm-keyword">function</span> <span class="cm-variable">Cat</span>(<span class="cm-def">name</span>){
  <span class="cm-variable">Animal</span>.<span class="cm-property">call</span>(<span class="cm-keyword">this</span>, <span class="cm-variable-2">name</span>)
}

<span class="cm-keyword">function</span> <span class="cm-variable">K</span>(){}
<span class="cm-variable">K</span>.<span class="cm-property">prototype</span> = <span class="cm-variable">Animal</span>.<span class="cm-property">prototype</span>

<span class="cm-variable">Cat</span>.<span class="cm-property">prototype</span> = <span class="cm-keyword">new</span> <span class="cm-variable">K</span>
<span class="cm-variable">Cat</span>.<span class="cm-property">prototype</span>.<span class="cm-property">constructor</span> = <span class="cm-variable">Cat</span>
<span class="cm-variable">Cat</span>.<span class="cm-property">prototype</span>.<span class="cm-property">type</span> = <span class="cm-string">&quot;cat&quot;</span>

<span class="cm-keyword">var</span> <span class="cm-variable">myAnimal</span> = <span class="cm-keyword">new</span> <span class="cm-variable">Animal</span>(<span class="cm-string">&quot;Foo&quot;</span>)
  , <span class="cm-variable">myCat</span> = <span class="cm-keyword">new</span> <span class="cm-variable">Cat</span>(<span class="cm-string">&quot;Bar&quot;</span>)

<span class="cm-variable">myCat</span> <span class="cm-keyword">instanceof</span> <span class="cm-variable">Cat</span> <span class="cm-comment">// true</span>
<span class="cm-variable">myCat</span> <span class="cm-keyword">instanceof</span> <span class="cm-variable">Animal</span> <span class="cm-comment">// true</span></code></pre>
<p>Maintenant, à l&#39;aide de deux petites méthodes :</p>
<pre><code class="language-javascript"><span class="cm-comment">// wow</span>
<span class="cm-comment">//         many magic</span>
<span class="cm-comment">//   very es5</span>
<span class="cm-comment">//            wow</span>
<span class="cm-keyword">function</span> <span class="cm-variable">extend</span>(<span class="cm-def">object</span>){
  <span class="cm-keyword">var</span> <span class="cm-def">self</span> = <span class="cm-variable">Object</span>.<span class="cm-property">create</span>(<span class="cm-keyword">this</span>)
  <span class="cm-keyword">if</span>(!<span class="cm-variable-2">object</span>) <span class="cm-keyword">return</span> <span class="cm-variable-2">self</span>
  <span class="cm-variable">Object</span>.<span class="cm-property">keys</span>(<span class="cm-variable-2">object</span>)
    .<span class="cm-property">forEach</span>(<span class="cm-keyword">function</span>(<span class="cm-def">key</span>){
      <span class="cm-variable-2">self</span>[<span class="cm-variable-2">key</span>] = <span class="cm-variable-2">object</span>[<span class="cm-variable-2">key</span>]
    })
  <span class="cm-keyword">return</span> <span class="cm-variable-2">self</span>
}

<span class="cm-keyword">function</span> <span class="cm-variable">create</span>(){
  <span class="cm-keyword">var</span> <span class="cm-def">self</span> = <span class="cm-variable">Object</span>.<span class="cm-property">create</span>(<span class="cm-keyword">this</span>)
  <span class="cm-keyword">if</span>(<span class="cm-keyword">typeof</span> <span class="cm-variable-2">self</span>.<span class="cm-property">constructor</span> == <span class="cm-string">&quot;function&quot;</span>) {
    <span class="cm-variable-2">self</span>.<span class="cm-property">constructor</span>.<span class="cm-property">apply</span>(<span class="cm-variable-2">self</span>, <span class="cm-variable-2">arguments</span>)
  }
  <span class="cm-keyword">return</span> <span class="cm-variable-2">self</span>
}

<span class="cm-keyword">var</span> <span class="cm-variable">klass</span> = {
    <span class="cm-property">create</span> : <span class="cm-variable">create</span>
  , <span class="cm-property">extend</span> : <span class="cm-variable">extend</span>
}</code></pre>
<p>Tu peux faire ça :</p>
<pre><code class="language-javascript"><span class="cm-keyword">var</span> <span class="cm-variable">animal</span> = <span class="cm-variable">klass</span>.<span class="cm-property">extend</span>({
    <span class="cm-property">constructor</span> : <span class="cm-keyword">function</span>(<span class="cm-def">name</span>){
      <span class="cm-keyword">this</span>.<span class="cm-property">name</span> = <span class="cm-variable-2">name</span>
    }
  , <span class="cm-property">getName</span> : <span class="cm-keyword">function</span>(){
      <span class="cm-keyword">return</span> <span class="cm-keyword">this</span>.<span class="cm-property">name</span>
    }
})

<span class="cm-keyword">var</span> <span class="cm-variable">cat</span> = <span class="cm-variable">animal</span>.<span class="cm-property">extend</span>({
    <span class="cm-property">constructor</span> : <span class="cm-keyword">function</span>(<span class="cm-def">name</span>){
      <span class="cm-variable">animal</span>.<span class="cm-property">constructor</span>.<span class="cm-property">call</span>(<span class="cm-keyword">this</span>, <span class="cm-variable-2">name</span>)
    }
  , <span class="cm-property">type</span> : <span class="cm-string">&quot;cat&quot;</span>
})

<span class="cm-keyword">var</span> <span class="cm-variable">myAnimal</span> = <span class="cm-variable">animal</span>.<span class="cm-property">create</span>(<span class="cm-string">&quot;Foo&quot;</span>)
  , <span class="cm-variable">myCat</span> = <span class="cm-variable">cat</span>.<span class="cm-property">create</span>(<span class="cm-string">&quot;Bar&quot;</span>)

<span class="cm-variable">cat</span>.<span class="cm-property">isPrototypeOf</span>(<span class="cm-variable">myCat</span>) <span class="cm-comment">// true</span>
<span class="cm-variable">animal</span>.<span class="cm-property">isPrototypeOf</span>(<span class="cm-variable">myCat</span>) <span class="cm-comment">// true</span></code></pre>
<p>Voilà, j&#39;espère que cela a pu attiser ta curiosité d&#39;en apprendre plus sur le langage lui-même et le DOM.</p>



<section class="putainde-AboutTheAuthor">
  
    
    <a class="putainde-AboutTheAuthor-avatar putainde-Author-avatar" href="http://bloodyowl.github.io">
      <img src="https://gravatar.com/avatar/37500337ba5d2aebc962959ed83928e5?s=300&amp;d=https%3A%2F%2Fidenticons.github.com%2Fc0863a4414cba6aa95014df9e3d9f6a5.png" />
    </a>
    
  
  <h1 class="putainde-AboutTheAuthor-title">
    Écrit par
    <strong class="putainde-AboutTheAuthor-name">bloodyowl</strong>
    <a class="putainde-AboutTheAuthor-url" href="http://bloodyowl.github.io"><i class="icon icon_home"> </i></a>
    <a class="putainde-AboutTheAuthor-twitter" href="https://twitter.com/bloodyowl"><i class="icon icon_twitter"> </i></a>
    <a class="putainde-AboutTheAuthor-github" href="https://github.com/bloodyowl"><i class="icon icon_github"> </i></a>
  </h1>
  
    
    <div class="putainde-AboutTheAuthor-bio--long"><p>Développeur front-end, aime la bonne bière artisanale, la musique, et JavaScript; n&#x27;aime ni les points virgules, ni les gens</p>
</div>
  
</section>





<section class="putainde-Comments">
  <h1 class="putainde-Comments-title">Comments</h1>
  <div id="disqus_thread" aria-live="polite">
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>



    </div>
    
    <aside class="putainde-Sidebar grid__cell unit-1-4--m">
    <aside class="putainde-Sidebar-block">
	<h1 class="putainde-Sidebar-block-title">On est partout !</h1>
	<ul class="putainde-Sidebar-block-list--nobullet">
		<li><a href="https://github.com/putaindecode"><i class="icon icon_github"></i> Github</a></li>
		<li><a href="https://twitter.com/putaindecode"><i class="icon icon_twitter"></i> Twitter</a></li>
		<li><a href="#derriere-toi,-c'est-affreux!" onclick="if (confirm('Attention Benjamin...!')) window.location = 'http://www.youtube.com/watch?v=MEKHaG9FxKY&t=44s'; return false;"><i class="icon icon_eye"></i> Derrière toi</a></li>
	</ul>
</aside>
<aside class="putainde-Sidebar-block">
	<h1 class="putainde-Sidebar-block-title">À avoir sous la main</h1>
	<ul class="putainde-Sidebar-block-list--nobullet">
		<li><a href="https://github.com/putaindecode/propositions-de-posts/issues/new"><i class="icon icon_pencil"></i> Proposer un article</a></li>
		<li><a href="https://github.com/putaindecode/propositions-de-posts/issues?labels=post&state=open"><i class="icon icon_bookmarks"></i> Voir les propositions</a></li>
		<li><a href="https://github.com/putaindecode/website/blob/master/src/posts/js/comment-se-passer-de-libraries-frameworks-javascript/index.html.hbs"><i class="icon icon_edit"></i> Modifier cette page</a></li>
	</ul>
</aside>


    </aside>
    
  </article>
  
    <footer class="putainde-Footer">

    <div class="putainde-Footer-colophon grid">
      <div class="putainde-Footer-colophon-left grid__cell unit-5-12--m">
        © 1970 - 2013 Putain de code
      </div>
      <div class="putainde-Footer-colophon-center grid__cell unit-2-12--m">
        <img class="putainde-Footer-logo" alt="Putain de code !" src="/assets/img/p!-logo.svg" />
      </div>
      <div class="putainde-Footer-colophon-right grid__cell unit-5-12--m">
        <span class="putainde-Footer-colophon-item">Made with ❤ by <a href="/le-crew/">le crew</a></span>
        |
        <a class="putainde-Footer-colophon-item" href="projets/">Projets</a>
        |
        <a class="putainde-Footer-colophon-item" href="https://github.com/putaindecode">Contact</a>
      </div>
    </div>
  </footer>

  
</div>
<script src="/assets/js/putaindecode.js?20140115174055"></script>


	
	<script>
		var _gaq=[['_setAccount','UA-43771806-1'],['_trackPageview']];
		(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
		g.src='//www.google-analytics.com/ga.js';
		s.parentNode.insertBefore(g,s)}(document,'script'));
	</script>
	





  <script>
  var disqus_shortname = 'putaindecode',
  
  
  
  disqus_identifier = 'http://putaindecode.fr/posts/js/comment-se-passer-de-libraries-frameworks-javascript/',
  disqus_url = 'http://putaindecode.fr/posts/js/comment-se-passer-de-libraries-frameworks-javascript/',
  disqus_script = 'embed.js';
  
  (function(d,s) {
  s = d.createElement('script');s.async=1;s.src = '//' + disqus_shortname + '.disqus.com/'+disqus_script;
  (d.getElementsByTagName('head')[0]).appendChild(s);
  })(document);
  </script>



</body>
</html>

